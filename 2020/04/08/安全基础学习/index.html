<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="我是良民的博客"><meta name="baidu-site-verification"><title>安全基础学习 | 我是良民</title><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.png"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="我是良民" type="application/atom+xml">
</head><link rel="stylesheet" type="text/css" href="/plugins/prettify/doxy.css"><script type="text/javascript" src="/js/ready.js" async></script><body class="night"><div class="mobile-head" id="mobile-head"><div class="navbar-icon"><span></span><span></span><span></span></div><div class="navbar-title"><a href="/">LITREILY</a></div><div class="navbar-search"><!--= show a circle here--></div></div><div class="h-wrapper" id="menu"><nav class="h-head box"><div class="m-hdimg"><a class="hdimg img" href="/"><img class="nofancybox" src="/img/profile.jpg" width="128" height="128"></a><h1 class="ttl"><a href="/">我是良民</a></h1></div><p class="m-desc">心之所向，无惧无悔,<br>愿求仁得仁，复无怨怼！</p><div class="m-nav"><ul><li><span class="dot">●</span><a href="/archives/">归档</a></li><li><span class="dot">●</span><a href="/categories/">分类</a></li><li><span class="dot">●</span><a href="/tags/">标签</a></li><li><span class="dot">●</span><a href="/about/">关于</a></li><li><span class="dot">●</span><a href="/atom.xml">RSS</a></li><li class="m-sch"><form class="form" id="j-formsch" method="get"><input class="txt" type="text" id="local-search-input" name="q" value="搜索" onfocus="if(this.value=='搜索'){this.value='';}" onblur="if(this.value==''){this.value='搜索';}"><input type="text" style="display:none;"></form></li></ul><div id="local-search-result"></div></div></nav></div><div id="back2Top"><a class="fa fa-arrow-up" title="Back to top" href="#"></a></div><div class="box" id="container"><div class="l-wrapper"><div class="l-content box"><div class="l-post l-post-art"><article class="p-art"><div class="p-header box"><h1 class="p-title">安全基础学习</h1><div class="p-info"><span class="p-date"><i class="fa fa-calendar"></i><a href="/2020/04/08/%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/">2020-04-08</a></span><span class="p-view" id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span></span></div></div><div class="p-content"><h2 id="虚拟机设置"><a href="#虚拟机设置" class="headerlink" title="虚拟机设置"></a>虚拟机设置</h2><p>1.使用桥接模式：使用的真实机的网卡，可以连接互联网也可以实现虚拟机和真实机互联，可以将其看作一个真实机，但网段必须与真实机一样。<br>2.NAT模式：虚拟机使用vmnet8这块虚拟网卡，虚拟机可以连接互联网，但是虚拟机只可以访问自己的真实机，但是不能访问其他真实机 （注意由于版本原因导致我安装的xp和win2003不能连接互联网）<br>3.仅主机模式：虚拟机会使用vmnet1这块网卡，虚拟机不能够上网，只能与真实机和虚拟机互访<br>4.网卡：vmnet0实际上就是桥接，即虚拟机直接连接到真实网络<br>虚拟机不能上网的原因，配置虚拟网络编辑器，更改网络设置，使用桥接网络，并且在桥接网络中有几个选项，分别为蓝牙连接，无线网卡连接，有线连接等，这里我们设置成自动即可，或者设置成对应的情况。</p>
<h2 id="window命令"><a href="#window命令" class="headerlink" title="window命令"></a>window命令</h2><ol>
<li>cd :直接退到更目录下  </li>
<li>rd :删除空文件夹  </li>
<li>rd /s /q:无条件删除空文件夹  /s 表示包括子文件夹也就是目录树，/q表示无需提示，安静模式</li>
<li>echo 字符串 &gt;&gt; 路径 + 文件名.扩展名 ：将字符串写入到文件夹中，写在最后面  </li>
<li>echo  字符串 &gt; 路径 + 文件名.扩展名 ：将字符串覆盖原有内容  </li>
<li>type 文件名.扩展名：浏览该文件</li>
<li>del 文件名.扩展名 ：删除文件  </li>
<li>copy con 文件名.扩展名：在控制台输入文字到文件中，回车后开始编辑，按住ctrl + z 结束编辑    </li>
<li>del <em>.</em> /s /q :删除所有文件 /s表示包括所有空文件夹  </li>
<li>attrib +h 文件夹  ：隐藏文件夹 h表示hidden  </li>
<li>attrib -h 文件夹名称 ：取消隐藏文件夹  </li>
<li>shutdown -s -t 秒:定时关机，-s表示关机 -t表示时间  </li>
<li>shutdown -s -f -t :表示定时强制关机，有时候12命令不好用的情况下  </li>
<li>shutdown -r -t 秒:定时重启  </li>
<li>shutdown -a :取消所有定时  </li>
<li>shutdown -l:注销  </li>
<li>copy 原文件路径名 目标文件路径名 ：复制文件  </li>
<li>./：当前路径名  </li>
<li>../:上一级路径  </li>
<li>move  原文件路径名 目标文件路径名：移动文件  </li>
<li>ren 旧名 新名 ：将文件/文件夹重命名，ren是rename的缩写  </li>
<li>/P 删除每一个文件之前提示确认。<br>/F 强制删除只读文件。<br>/S 从所有子目录删除指定文件。<br>/Q 安静模式。删除全局通配符时，不要求确认。<br>/A 根据属性选择要删除的文件。<br>attributes R 只读文件 S 系统文件   </li>
<li>netstat -an：查看所有端口  </li>
<li>net share ：查看所有共享文件夹列表</li>
<li>net share 共享名 /del:关闭共享</li>
<li>ipconfig /flushdns 修改dns缓存。</li>
<li>nslookup <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> 解析baidu的ip地址。</li>
</ol>
<h2 id="批处理"><a href="#批处理" class="headerlink" title="批处理"></a>批处理</h2><p>批处理文件 文件名.bat<br>里面执行的使dos命令<br>开头写上@echo off 关闭回显及不显示执行过程，只显示执行结果，结尾写上pause防止闪退，&gt;nul &nbsp;2&gt;nul表示屏蔽输出，及不管执行正确与否都不会显示输出</p>
<p>代码</p>
<pre><code>@echo off  
color 0a
title my title
echo ===========
echo the programe
echo============
pause
echo rubbish is cleaning....
E: &gt;nul 2&gt;nul //进入E盘使用 &gt; nul 2&gt;nul是为了防止出现报错信息
cd / &gt;nul 2&gt;nul
rd ./s/q &gt;nul 2&gt;nul
ping -n 127.0.0.1 &gt;nul 2&gt;nul
echo congratulation
pause
如果不加&gt;nul 2nul 就会出现如下情况:  
the programe
请按任意键继续. . .  
rubbish is cleaning....  
.\$RECYCLE.BIN - 拒绝访问。  
.\SYSTEM~1 - 拒绝访问。
congratulation  
请按任意键继续. . .</code></pre><p>：冒号用来区分区块的,相当于swith语句中的case，使用goto语句可以跳转到区块位置<br>@echo off<br>tile 飞鸽小程序</p>
<h4 id="小案例"><a href="#小案例" class="headerlink" title="小案例"></a>小案例</h4><pre><code>:menu
echo ====================
echo     菜单
echo 1.定时关机
echo 2.取消定时
echo 3.推出
echo ====================
set /p num = 请选择您的选项
if &quot;%num%&quot; ==&quot;1&quot; goto 1
if &quot;%num%&quot; ==&quot;2&quot; goto 2
if &quot;%num%&quot; ==&quot;3&quot; goto 3
echo 输入错误
goto memu
:1
set /p a=请输入结束时间:
shutdown -s -f -t %a%
goto menu

:2
shutdown -a
goto menu

:3
exit</code></pre><h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><p>windows服务器版本win2000，win2003，win2008，win2012<br>Linux服务器：redhat centos<br>每个账户有自己的SID（安全标识符）<br>用户SID：S-…..-500  其中前面表示系统SID，后面500表示管理员的UID为500，普通用户后面接的从1000开始。<br>查看sid值：whoami /user<br>账户密码存储位置：C:\windows\system32\config\SAM,windows系统上，默认密码最长有效期为42天  </p>
<h4 id="账户"><a href="#账户" class="headerlink" title="账户"></a>账户</h4><ol>
<li>给人使用的账户<br>administrator #管理员账户<br>guest #来宾账户  </li>
<li>计算机系统账户<br>system  :系统账户，<font color = red>权限最大</font><br>local services :本地账户=普通用户<br>net services:本地账户= 普通账户  </li>
</ol>
<p>账户保存路径（家）<br>win7/win2008 C:\用户\<br>xp/win2003 C:\documents and settings\</p>
<h4 id="用户命令"><a href="#用户命令" class="headerlink" title="用户命令"></a>用户命令</h4><p>net user ：查看所有用户<br>net user 用户名  密码 ：为用户更改密码<br>net user 用户名 密码 /add ：创建一个新用户<br>net user 用户名 /active:yes/no: 激活或者禁用用户  </p>
<h2 id="组管理"><a href="#组管理" class="headerlink" title="组管理"></a>组管理</h2><p>作用：将需要赋予一样权限的用户放在一个组中，这样可以方便为该用户赋予权限  </p>
<h4 id="内置组-权限从高到低排序"><a href="#内置组-权限从高到低排序" class="headerlink" title="内置组 权限从高到低排序####"></a>内置组 权限从高到低排序####</h4><p>administrators :管理员组<br>guests：来宾组<br>uses：用户组<br>network：网络配置组<br>print：打印机组<br>remote desktop：远程桌面组  </p>
<h4 id="组管理命令"><a href="#组管理命令" class="headerlink" title="组管理命令"></a>组管理命令</h4><p>net localgroup:列出所有组<br>net localgroup 组名：查看该组的所有成员<br>net localgroup 组名 /add:添加该组（后面可以为该组赋予权限）<br>net localgroup 组名 用户名 /add 添加用户到组<br>net localgroup 组名 用户名 /del：删除用户<br>net localgroup 组名 /del：删除组</p>
<h2 id="服务器远程管理"><a href="#服务器远程管理" class="headerlink" title="服务器远程管理"></a>服务器远程管理</h2><p>可视化实现<br>1，将winxp和win2003连接在同一个局域网中，以保证能ping通<br>2.将服务器的远程桌面开启，我的电脑-&gt;右键属性，远程-&gt;开启远程桌面<br>3.在客户机上win+r输入mstsc，输入ip，输入用户名和密码（注意，如果是普通用户，是无法完成远程登录的，因为没有这个权限，所以，需将该用户放到remote desktop这个组中）<br>命令行实现<br>1.服务器win+r输入services.msc 找到telnet服务将其改为启动并且自动，这样每次开机后就会启动<br>2.在客户机上进入命令行窗口输入telnet +ip,输入账号和密码  ，结果发现telnet仍然关闭，这是因为没有赋予权限，将用户放到TelnetClients这个组中，如果没有就手动添加。</p>
<h2 id="NTFS权限"><a href="#NTFS权限" class="headerlink" title="NTFS权限"></a>NTFS权限</h2><p><strong>文件系统</strong>：实际上就是格式化后系统重新在磁盘上划分格子的过程<br>常用的文件系统 1.FAT(windows) 2.NTFS(windows) 3.EXT(linux)<br>NTFS特点 提高磁盘读写性能，可靠，磁盘利用率高，支持单个文件大于4G，NTFS应用于文件比较大的磁盘比较合适，而FAT应用于文件比较小的磁盘，否则会比较浪费磁盘资源，以上优点都是FAT不具有的。所以我们在安装系统时通常选择NTFS<br><strong>修改NTFS权限</strong><br>特殊权限：控制文件权限列表的权限<br>当用户同时属于多个组时，权限是累加的，即该用户拥有所属于的所有组的权限<br><strong>拒绝权限最大：</strong>当用户a属于b组，但b组中的文件不想让a看，所以在权限中添加a用户然后权限选择全部拒绝。<br>强制继承：文件夹下的各个子文件夹权限不同，现在需要将子文件夹的权限都改成父文件夹的权限，进行权限同一。解决：文件右键，属性，安全，高级，勾选第二个对号。<br><strong>文件复制对权限的影响：</strong>同一级文件复制后，被复制的文件权限被改变为父级的文件权限，同一级的文件剪切后，被剪切的文件放到文件后权限不变。不是同一级的文件复制或者剪切后出现被复制的文件权限被更改为父级文件夹的权限。<br><strong>隐藏共享文件夹</strong>：如果某个文件夹不想要被别人看见，填写共享名，并且后面加上$符号，例如share$，那么访问者就不会看见该文件夹，如果想要被指定的人访问，则让访问者在后面加上隐藏的文件的名称，例如 \+ip+\share$<br><strong>列出所有共享文件夹</strong>  net share  所有盘符默认共享<br><strong>关闭共享</strong> net share 共享名 /del，但是开机之后仍然默认共享所有盘符 ，如果想要有些东西共享，有些不共享，解决：在删除共享之后，更改注册表将自启动共享关闭，即在注册表中找到 hkey_local_machine\system\currentcontrolset\services\lanmanserver\parameters\右键建立DWORD文件，名称为AutoShareServer,值为0，这样下次开机时就不会默认开启所有共享<br>计算机只作为网页服务器，关闭共享服务，在服务中，将server这个服务关闭即可。这样该计算机就不会提供共享服务。<br><strong>添加共享</strong> net share c: /add  </p>
<h2 id="PE破解系统"><a href="#PE破解系统" class="headerlink" title="PE破解系统"></a>PE破解系统</h2><p>u深度增强版</p>
<h2 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h2><p>作用：自动分配ip地址<br>概念：地址池：（包括ip，子网掩码，网关，DNS，租期）<br>原理：<br>1）客户机发送DHCP Discovery广播包，以在服务器上请求ip地址<br>2）多个服务器收到请求，响应DHCP Offer广播包，但是到达客户机的时间是有先后顺序的。<br>3）客户机发送DHCP Request广播包 说是请求包，实际上更准确是选择包，但是在选择之后，需要向服务器进行ip，子网掩码，网关等请求分配，所以用request<br>4）服务器发送DHCP ACK广播包 确定租约，并提供ip，网关等信息。<br><strong>DHCP续约</strong><br>因为分配的ip地址不可能永远给某一个计算机，所以ip地址使用是有期限的，假如租约为24小时，那么在50%时间即12小时后客户机会发送DHCP Request包，与服务器关于ip地址进行续约，如果出现特殊情况，在50%时间时服务器宕机，则在87.5%时间重新发送一下请求包，以请求续约，如果仍无响应，那么就释放ip地址，重新进行分配。<br>（补充）如果使用kali系统一直进行请求分配ip地址，那么总有一天服务器的资源总会有消耗尽的情况，所以这就是DHCP安全，但是像思科，华为等设备分配ip地址时会与客户机的MAC地址进行绑定，所以不会出现DHCP攻击情况，这也就是硬件安全。<br><strong>DHCP部署</strong><br>将win2003作为服务器，也就是地址池，客户机从该服务器中自动获取服务器网段的ip地址。<br> 虚拟机中将服务器和客户机连接到同一个网卡上。例vmnet2-&gt; 点击我的电脑中cd光驱，-&gt;选中安装可选的windows组件-&gt; 找到网络服务，双击打开，找到动态主机配置协议，勾上。-&gt;注意，需要将win2003配置成为静态ip，即设定固定ip。（此时开启了67，68端口），-&gt;在所有程序，管理工具中打开dhcp开始设置作用域，-&gt;右键服务器名称-&gt;新建作用域，-&gt;设置名称和描述-&gt; 设置分配地址范围，通常前面预留出来20个，因为公司可能有其他服务器，后面预留出5个，作为网关，例192.168.0.21-192.168.0.250-&gt;ip地址排除，如果在该范围内某个ip有其他的作用，可以将其排除，-&gt;设置服务器租约期限，即客户机多长时间更换一次ip-&gt;设置dhcp选项，即网关，例与公司网关吻合，-&gt;设置dns服务器，父域不用写，直接写ip地址，即win2003应该访问哪个服务器例114.114.114.114。-&gt;设置wins服务器，不再使用它，直接下一步。-&gt;激活-&gt;客户机winxp查看ip，首先将本地连接停用，再开启，起到更新的作用.失败的原因，客户机默认是连接再vmware默认的服务器上，没有连接在win2003上，所以需要设置。-&gt;在vmwrae上编辑-&gt;修改网络编辑器，-&gt;更改设置，-&gt;设置成自己选择的网卡，-&gt;将使用本地dhcp服务将ip地址分配给虚拟机前面的对号勾掉。即可。<br><strong>释放IP</strong> 命令ipconfig /release<br><strong>重新分配ip</strong> 命令：ipconfig /renew<br>问题：如果服务器想对某个计算机分配固定的ip，针对该计算机例如老板，服务器永远只给她分配固定的ip，怎样解决？首先在客户机端 ipconfig /all 复制mac地址，打开dhcp中，新建保留，设置ip和粘贴mac地址，即可。<br>问题2：如果以上的设置不小心被删除了，可以导入以前的备份文件，前提是有备份文件，也是在dhcp中设置本分，  保存即可。<br>问题3：可为该服务器分配多个作用域，以解决多个部门使用不同的ip地址范围。  </p>
<h2 id="DNS服务器"><a href="#DNS服务器" class="headerlink" title="DNS服务器"></a>DNS服务器</h2><p>DNS：用来解析ip地址的。搭建过程与DHCP一样，只不过是选择DNS即可。安装路径设置在e盘否则报错<br>DNS的解析过程，和路由器差不多的原理，都是客户机发起请求后，进行DNS服务器查找，域名，然后进行解析。类似路由器之间的查找。<br>服务器创建完DNS服务器之后，需要新建正向DNS域（反向dns域表示根据ip地址获取域名，配置反向解析中需要进行指针指向所配置好的正向的dns服务器），即创建DNS服务器，域名称baidu.com，告诉大家使用该DNS服务器的客户机访问baidu.com时会解析为指定的ip，SOA告诉解析baidu.com的服务器是谁，NS这是备份服务器。在空白处右键，新建主机，主机名为www，ip地址即自己指定访问<a href="http://www.baidu.com时解析为哪个ip地址。此时在客户机上使用nslookup" target="_blank" rel="noopener">www.baidu.com时解析为哪个ip地址。此时在客户机上使用nslookup</a> <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> 解析域名发现与指定的DNS不符，这是因为没有指定DNS服务器，所以在配置固定ip地址的提示框中手动配置DNS服务器为Win2003的ip地址，修改dns后 ipconfig /flushdns 刷新dns缓存。<br>如果想要客户机使用wind2003-1配置的dns服务器，转换到win2003-2配置的dns服务器，可以点击win2003中搭建的服务器，然后右键有个转发器设置成win2003-2的ip地址即可。<br>如果域名没有在dns服务器中配置，那么服务器最终会找到根服务器然后进行解析<br>如果想要设置win2003-1为主dns服务器，-2为备份dns服务器，那么先在win2003上dns上点击域名右键属性，设置备份ip地址为win2003-2的ip地址。然后在win2003-2上创建辅助区域，名称为win2003-1备份的域名，ip地址设置为win2003-1的ip。<br><strong>手工解析域名：</strong>例如nslookup <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a>     </p>
<h2 id="IIS"><a href="#IIS" class="headerlink" title="IIS"></a>IIS</h2><p>IIS是网站服务器，属于微软的。类似于apache，phpstudy等网页服务器。<br>在IIS配置：在一个网站中右击属性，有个ip配置，全部未分配表示该服务器可能具有多个ip（在配置ip时有个高级，在高级中可以配置多个ip），那么客户机访问该网站时可以以任意一个ip进行访问，但是如果指定了ip，那么就只能以该ip访问<br>IIS网站存放目录 在inetpub下的wwwroot文件夹下。<br>配置网站时，如果想要不输入ip+端口，那么在开始配置时可以添加主机头，或者在属性，网站，ip后面的高级中配置主机头值，即www…com，那么在访问的时候就只输入www.网站名.com 即可访问。<br>在配置默认首页时，将指定的页面放在第一位，那么访问该网站时，可以不输入首页直接写ip地址+端口号就可以访问。<br>如果想要访问动态网页（可以互动的网页），那么在web服务扩展中将active server pages服务开启。<br>如果在网站的主文件夹下，或者访问其他文件夹下的网页不能访问，或者提示没有开启父路径，这是因为没有开启父路径的缘故，点击网站，右键属性，在主目录中打开配置，点击选项，开启父路径。</p>
<h2 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h2><p>端口21：控制模式，即控制客户机与服务器之间的连接过程<br>20端口：数据模式，用在客户机和服务器之间的数据传输。<br>file transfor protocol<br>类似于远程管理，可以远程下载。开启方式，控制面板，添加或删除程序，双击应用程序服务器，双击internet信息服务，开启FTP服务。也是在IIS中找到FTP站点。访问方式，在我的电脑，输入路径<a href="ftp://ip即可访问，但是默认只能访问c:\inetpub\ftproot下的文件夹，如果想要访问其他文件夹，需要在服务器上属性中更改路径即可。">ftp://ip即可访问，但是默认只能访问c:\inetpub\ftproot下的文件夹，如果想要访问其他文件夹，需要在服务器上属性中更改路径即可。</a><br>现在要求FTP服务器中特定用户客户机（需要输入账号和密码）对于某个文件夹只能上传，，先创建用户和密码 。找到FTP配置的根目录下的文件夹，右键属性，安全，高级，取消‘允许父项的继承权限’（因为它的上一级文件夹是完全控制），复制，确定，在用户中添加需要公开的用户。然后再权限中将读取去掉，将写入勾上（因为要求该用户只能上传不能下载）。另一个用户如果只能下载不能上传，只需勾选读取即可。<br>如果要求客户机只能输入账号密码才能访问，还要再客户机上右击网站，属性，安全账户，将允许匿名访问前面的勾去掉。这样当访问该主目录时权限完全匹配。如果出现权限不匹配的情况，那可能是创建该用户的管理员的权限问题。<br>开启服务器比较好用的软件 ftp server.exe，作为开启服务器的软件，设置权限和密码时比较方便。注意如果使用ftpserver就关闭iis中的ftp站点，*<em>需要关闭防火墙 *</em> </p>
<h2 id="域"><a href="#域" class="headerlink" title="域"></a>域</h2><p>domin  本地系统帐户是本机建立的用户帐户,域账户是<strong>域服务器</strong>上由管理员分配度给你的帐户<br>好处：集中管理，统一管理，人人不平等。<br>组成：1.域控制器：DC 2.成员机<br>条件：1）安装域控制器就生成了域环境 2）安装了活动目录就安装了域控制器 3）活动目录 Active Directory = AD，活动目录就是AD，特点：集中/统一管理<br><strong>配置过程：</strong><br>1.使用win2008服务器。关闭防火墙。选择ipv4地址，不选择ipv6地址。<br>2.配置静态ip地址，win2008的dns配置不需要填写，空着，让他自动使用安装的dns服务器。<br>3.右键我的电脑，管理，角色（即服务），添加角色，找到active directory域服务。但是这种方法安装后不全面，所以在运行里面输入 dcpromo,勾选dns，勾选新建林中新建域，级别设为2003，及林中最低级别系统为2003，直至完成。（注意只需要给win2008安装活动目录，因为将2008作为域服务器，而其他客户机只需要加入域就可以了）<br>4.当本地本地账户升级为dc后，则本地管理员就变成域管理员，权限变大了，所以也没有用户和组这个选项了。<br>5.此时查看登录用户，都是qf.com/administrator这个账户，说明administrator是属于域管理员了。<br>6.<strong>将win7加入域：</strong>需要将同一域中的计算机连在同一网卡上，同时ip在同一网段上，dns设置为配置域的服务器的ip地址，即win2008的ip<br>7.将计算机加在域中，右击计算机，属性，计算机名称，更改设置，加入域，域名为qf.com，弹窗后使用域管理员登录，即qf.com\administrator 密码123.com,重启计算机，使用域管理员登录即可。<br>8.在管理工具中找到active derectory 用户和计算机，找到qf.com,computer，看到已经有一个计算机加入该域了。<br>9，在域服务器中创建普通用户：找到users，右键新建用户，输入姓名，用户名，密码等，完成后在用户列表中可以看到用户名。此时在win7中使用该用户名，密码就可以登录win7系统，说明该用户是在win2008中创建的域用户，但是可以在其他的域客户机中进行登录，即该用户名是被域服务器管理的。<br>10:登录不成功的情况：这是因为用户名前面没有加上域名，有的系统会自动在下面加上qf.com,但是有的系统需要自己手写qf.com\tao.yang<br>11权限问题：因为tao.yang属于普通域用户，但是它想要与本地管理员相同的权限。操作：客户机使用qf.com/administrator（域管理员）登录，然后打开服务中本地用户和组，将tao.yang添加到本地管理员中即可（可以看到域管理员属于本地用户中管理员权限，而普通域用户属于本地普通用户权限）将用户加入到普通成员机的本地管理员组中，千万不能将普通域用户提高到域管理员，因为域管理员是对整个域进行操作，而本地管理员只对本机有最高操作权限。另一种方式，使用本地管理员登录，然后再本地用户和组中添加tao.yang 到本地管理员组，但是需要获得域管理员的权限（需要输入域管理员的账号和密码），<strong>因为域成员是受域管理员（domin admin）的管控，不受本地管理员的管控</strong><br>12,域管理员-domin admin<br>13，组织成员：OU：用来归类资源，即归类域资源，域计算机，域组，与本地计算机中的组差不多。<br>创建组织单位，打开active derectory计算机和用户，找到最大的域服务器，即qf.com 然后右键新建，组织单元，输入名称之后确定，在右击前锋集团，右键新建组织单元，董事会，一次进行创建。然后将users中的‘杨涛’，右键移动到西北区。张三移动到IT部。以上是对用户进行操作，如果用户离职了，但是想对域计算机进行控制，所以需要将计算机也添加到组织单位中，在目录中的computer中查看计算机名，然后也移动到对应的部门。这是对计算机进行限制，而前面是对用户进行限制。<br>14：组策略：GPO，可以修改计算机的各种属性，共有成千上万中属性。在管理工具有个组策略管理，里面含有所有组策略。默认是没有组策略表的，所以点击前锋集团，右键创建GPP…,所有创建完成之后，点击生成的组策略表，右键编辑即可进行用户或者计算机属性更改。  如果忘记了自己都设置了哪些组策略，那么就在组策略设置的右侧有个设置，找到管理模板就可以查看了。<br>15，<strong>默认情况下的</strong>权限：LSDOU，L：本地 S：站点 D：domin OU：代表所有组策略 即先看自己的本地组策略，s不常用 然后是domin，当本地没有设置的情况下，默认使用domin设置的组策略<br>16，如果客户机自己设置了组策略，但是上级要求按照上级的配置，所以可以点击千锋集团，右键有个强制，即可强制要求所有下级配置的组策略全部按照自己的配置。<br>17，如果本级设置了阻止继承，那么在上级没有设置强制的情况下设置了组策略，会使用本级的设置，不使用上级的设置，如果上级设置了强制，那么就使用上级的设置。<br> 例如网吧的电脑，当关机或者注销之后，所有的安装软件或者文件都会别自动删除，这就是使用了组策略中计算机设置的注销或者关机时调用了删除命令。例如设置密码长度，密码使用期限等</p>
<h2 id="PKI技术"><a href="#PKI技术" class="headerlink" title="PKI技术"></a>PKI技术</h2><p>PKI<br>1、PKI概述<br>名称：Public Key Infracation公钥基础设施<br>作用：通过加密技术和数字签名保证信息的安全<br>组成：公钥加密技术、数字证书、CA（证书颁发机构）、RA</p>
<p>2、信息安全三要素<br>机密性，即传输的信息是保证无法破解的<br>完整性，传输的信息是完整的，不会出现丢包的情况<br>身份验证/操作的不可否认性，是A发的就指定A，不能否认是A发的信息。  </p>
<p>3.哪些IT领域用到PKI：<br>1）SSL/HTTPS<br>2）IPsecVPN<br>3）部分远程访问VPN  </p>
<p>4、公钥加密技术<br>作用：实现对信息加密、数字签名等安全保障<br>加密算法：<br>          1）对称加密算法，即A和B之间进行传输，发送发和接收方都使用相同的密钥。<br>         加解密的密钥一致！<br>             DES  3DES  AES  </p>
<pre><code>     2）非对称加密算法  
     *通信双方各自产生一对公私钥。  
         *双方各自交换公钥  
         *公钥和私钥为互相加解密关系！  
         *公私钥不可互相逆推！  
          RSA  DH  </code></pre><p>HASH算法：MD5  SHA （验证完整性）<br>HASH值可逆么？不可逆</p>
<p>数字签名：<br>用自己的私钥对摘要加密得出的密文就是数字签名</p>
<p>5证书：<br>证书用于保证公密的合法性<br>证书格式遵循X.509标准<br>数字证书包含信息：<br> 使用者的公钥值<br> 使用者标识信息（如名称和电子邮件地址）<br> 有效期（证书的有效时间）<br> 颁发者标识信息<br> 颁发者的数字签名   </p>
<p>数字证书由权威公正的第三方机构即CA签发<br>CA是权威证书颁发机构，为了公正“公钥”的合法性！<br>机密性：使用对方的公钥加密！<br>身份验证/数字签名：使用自己的私钥！  </p>
<p><strong>非对称算法原理：</strong> A和B之间进行通讯，A和B都有自己的公钥和私钥，他们可以互相识别，但是不可逆推，即不能从公钥推出私钥，也不能从私钥推出公钥，首先A和B之间交换公钥，这样A和B分别有三把密钥，即自己的公钥和私钥加上对方的公钥，然后数据包使用算法进行加密（RSA算法），在这其中，把从对方获得的公钥插入该算法中，发送数据包，当互相获取到数据包之后使用自己的私钥来匹配自己的公钥，解开数据包，这样就解密完成。如果攻击者从传输间获取到了公钥，这也没有关系，因为私钥是只有自己才拥有的，攻击者获取不到私钥。但是还有另一问题，就是对方怎么确定是对方发送的数据包，有没有可能是第三方发送的。这就考虑到数据签证的问题。此时A和B进行通讯。A发送数据包给B，B不能确定这是不是A发送过来的，所以不能接受，但是此时我们加入第三方认证机构（类似于公安局），A告诉公安局A的身份，B告诉公安局B的身份。此时他们都是相信公安局的。当A发送给B时，中间先通过公安局，公安局在告诉B这个的确是A，此时A和B可以相互确认身份，可以互相通信了。</p>
<p>===========================================</p>
<p>****实验名称：部署HTTPS服务器/部署SSL服务器</p>
<p>实验环境：<br>1）win2008作为https服务器：10.1.1.2/24<br>2）win7作为客户机：10.1.1.1/24<br>3）桥接到虚拟网络vmenet1</p>
<p>实验步骤：<br>1.配置服务器IP地址10.1.1.2/24。</p>
<p>2.安装IIS服务 并建立一个站点。(必须使用域名)并配置DNS服务器，并初步验证访问<a href="http://www.flower.com一下。" target="_blank" rel="noopener">http://www.flower.com一下。</a></p>
<p>3.安装CA组件</p>
<p>4.打开IIS，先生成证书申请文件</p>
<p>5.向CA申请证书：<br>  打开网页<a href="http://10.1.1.2/certsrv并向CA发送web服务器申请文件" target="_blank" rel="noopener">http://10.1.1.2/certsrv并向CA发送web服务器申请文件</a></p>
<p>6.CA颁发证书</p>
<p>7.在web服务器上下载并完成安装</p>
<p>8.在web服务器上启用SSL443</p>
<p>9.要求用户必须使用443访问，不能使用80访问！</p>
<h2 id="ARP攻击"><a href="#ARP攻击" class="headerlink" title="ARP攻击"></a>ARP攻击</h2><p>ARP攻击永远只能攻击内网，如果攻击外网需要经过路由表，而arp协议无法通过路由表，因为他不知道自己应该去哪里。<br>=====广播与广播域=====<br>广播：将广播地址做为目的地址的数据帧<br>广播域：网络中能接收到同一个广播所有节点的集合，广播域越小越好，因为如果越大，则广播中产生的垃圾越多。<br>MAC地址广播<br>广播地址为FF-FF-FF-FF-FF-FF  </p>
<p>IP地址广播<br>1）255.255.255.255<br>2）广播IP地址为IP地址网段的广播地址，如192.168.1.255/24  </p>
<p>=========================================================<br>ARP协议讲解：<br>1.地址解析协议<br>2.作用：将IP解析为MAC地址<br>3.原理：<br>1）发送ARP广播请求<br>    ARP报文内容:我是10.1.1.1 我的mac：AA<br>                    谁是10.1.1.3 你的mac：？<br>2）接收ARP单播应答<br>4.ARP攻击或欺骗的原理是：<br>  通过发送伪造虚假的ARP报文（广播或单播），来实现的攻击或欺骗！<br>  如虚假报文的mac是伪造的不存在的，实现ARP攻击，结果为中断通信/断网！<br>  如虚假报文的mac是攻击者自身的mac地址，实现ARP欺骗，结果可以监听、窃取、篡改、控制流量，但不中断通信！  </p>
<p>5.ARP协议没有验证机制，所以容易被arp投毒攻击</p>
<p>6.ARP攻击者通过发送虚假伪造的arp报文对受害者进行ARP缓存投毒</p>
<p>7.路由器的工作原理<br>1）一个帧到达路由，路由器首先检查目标MAC地址是否自己，如果不是则丢弃，如果是则解封装，并将IP包送到路由器内部<br>2）路由器检查IP包头中的目标IP，并匹配路由表，如果匹配失败，则丢弃，并向源IP回馈错误信息，如匹配成功，则将IP包路由到出接口。<br>3）封装帧，首先将出接口的MAC地址作为源MAC封装好，然后检查ARP缓存表，检查是否有下一跳的MAC地址，如有，将提取并作为目标MAC地址封装到帧中，如没有，则发送ARP广播请求下一跳的MAC，并获取到对方的mac地址，再记录缓存，并封装帧，最后将帧发送出去。<br>8.如果公司有人在做ARP欺骗，该如何找到此人？</p>
<h3 id="ARP防御"><a href="#ARP防御" class="headerlink" title="ARP防御"></a>ARP防御</h3><p>arp默认是没有防御能力的。<br>ARP攻击防御：<br><strong>1.静态ARP绑定：</strong>手工绑定/双向绑定即如果攻击者在线路上仿造mac地址，路由器是不信任它的，只信任固定绑定的静态ARP。<br>  windows客户机上：<br>  arp -s 10.1.1.254  00-01-2c-a0-e1-09做静态绑定<br>  arp -a  查看ARP缓存表<br> 路由器上静态绑定：Router(config)#arp 10.0.0.95 0013.240a.b219 arpa f0/0<br>优点：配置简单<br>缺点：工作量大，维护量大，关机后就消失。</p>
<p><strong>2.ARP防火墙</strong><br>  自动绑定静态ARP，主动防御，会不断向网关发送数据包证明自己是自己，所以360卫士不会主动打开arp防火墙，因为会对公司网络造成负担。<br>  优点：简单易用<br>  缺点：当开启人数较多时，会增大网络负担  </p>
<p><strong>3.硬件级ARP防御</strong>：<br>  交换机支持“端口”做动态ARP绑定（配合DHCP服务器）<br>  或做静态ARP绑定<br>  如：<br>  conf t<br>  ip dhcp snooping<br>  int range f0/1 - 48<br>  switch(config-range-if)#</p>
<h2 id="VLAN"><a href="#VLAN" class="headerlink" title="VLAN"></a>VLAN</h2><p>广播的危害：增加网络负担，容易传播病毒，安全性降低。<br><strong>减少广播的方法：</strong>减少广播域<br>可以使用路由器进行隔离广播（物理广播），缺点：成本高，不灵活<br>使用VLAN限制广播域：VLAN是在交换机上通过逻辑隔离实现的广播域分割。实际上就是在广播域中在创建多个频段，使分割开的计算机处在不同的频段中。VlAN作用就是使用逻辑来隔离广播，没有使用物理硬件。因为无法完成不同vlan之间的通信，所以我们可以看成一个vlan=一个网段，但在现实中不是这样的。<br> <strong>Trunk</strong><br>trunk的作用是使用vlan进行逻辑划分之后，如果处在相同域但是不同的两个交换机之间是不能进行互通的，因为中间隔着两台交换机，即使是相同的域交换机之间也不能识别。所以引用了trunk技术，可以实现不同的交换机之间相同的域之间进行通信。但是无法完成不同交换机之间非相同的域之间通信。<br><strong>单臂路由</strong><br> 为了方便管理，在设置网络过程中通常是一个vlan设置为一个网段。但是vlan是设置在交换机上，而不同的网段是通过路由器的接口进行分开的，为了完成交换机可以实现不同网段的划分，可以将路由器添加多个子接口（虚拟接口，可以有上万个），虚拟接口即可完成不同网段的划分（虚拟接口与物理接口的区别是前者不如后者稳定）。但是不同的vlan之间无法通信，所以要想办法弥补该缺点。因为交换机无法完成两个网段的通信，所以会通过路由的子接口进行通信，即PC中的vlan1数据包传送到交换机，交换机通过trunk接口传送到路由器子接口1，然后子接口找到目标接口也就是子接口2，数据包传送到子接口2，子接口2通过trunk接口传送到交换机，进而找到另一个网段的vlan2，从事实现不同vlan之间的通信。单臂路由就是交换机与路由器之间的通信通过trunk接口，进行通信，防止每个vlan配一个交换机到路由器之间的接口，导致接口不够用。所以只通过一个trunk接口连接到路由就是单臂路由。<br>单臂路由的缺点：1.网络瓶颈2.容易发生单点物理故障3.vlan之间发送的每一个祯都需要单独路由。<br><strong>ICMP</strong><br>icmp协议没有端口号<br>作用：网络探测与回馈机制。</p>
</div><div class="p-copyright"><blockquote><div class="p-copyright-author"><span class="p-copyright-key">本文作者：</span><span class="p-copytight-value"><a href="mailto:litreily@163.com">我是良民</a></span></div><div class="p-copyright-link"><span class="p-copyright-key">本文链接：</span><span class="p-copytight-value"><a href="/2020/04/08/%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/">http://yoursite.com/2020/04/08/安全基础学习/</a></span></div><div class="p-copyright-note"><span class="p-copyright-key">版权声明：</span><span class="p-copytight-value">本博客所有文章除特殊声明外，均采用<a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"> CC BY-NC 4.0 </a>许可协议。转载请注明出处 <a href="http://yoursite.com">我是良民的博客</a>！</span></div></blockquote></div></article><div class="p-info box"></div><aside id="toc"><div class="toc-title">目录</div><nav><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#虚拟机设置"><span class="toc-number">1.</span> <span class="toc-text">虚拟机设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#window命令"><span class="toc-number">2.</span> <span class="toc-text">window命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#批处理"><span class="toc-number">3.</span> <span class="toc-text">批处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#小案例"><span class="toc-number">3.0.1.</span> <span class="toc-text">小案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户管理"><span class="toc-number">4.</span> <span class="toc-text">用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#账户"><span class="toc-number">4.0.1.</span> <span class="toc-text">账户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#用户命令"><span class="toc-number">4.0.2.</span> <span class="toc-text">用户命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#组管理"><span class="toc-number">5.</span> <span class="toc-text">组管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#内置组-权限从高到低排序"><span class="toc-number">5.0.1.</span> <span class="toc-text">内置组 权限从高到低排序####</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#组管理命令"><span class="toc-number">5.0.2.</span> <span class="toc-text">组管理命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#服务器远程管理"><span class="toc-number">6.</span> <span class="toc-text">服务器远程管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NTFS权限"><span class="toc-number">7.</span> <span class="toc-text">NTFS权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PE破解系统"><span class="toc-number">8.</span> <span class="toc-text">PE破解系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DHCP"><span class="toc-number">9.</span> <span class="toc-text">DHCP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DNS服务器"><span class="toc-number">10.</span> <span class="toc-text">DNS服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IIS"><span class="toc-number">11.</span> <span class="toc-text">IIS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FTP"><span class="toc-number">12.</span> <span class="toc-text">FTP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#域"><span class="toc-number">13.</span> <span class="toc-text">域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PKI技术"><span class="toc-number">14.</span> <span class="toc-text">PKI技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ARP攻击"><span class="toc-number">15.</span> <span class="toc-text">ARP攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP防御"><span class="toc-number">15.1.</span> <span class="toc-text">ARP防御</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN"><span class="toc-number">16.</span> <span class="toc-text">VLAN</span></a></li></ol></nav></aside></div><section class="p-ext"><div class="l-pager l-pager-dtl box"><a class="next" href="/2020/04/06/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%AD%A6%E4%B9%A0/">网络安全学习 &gt;</a></div><div id="valine-comment"><style type="text/css">.night .v[data-class=v] a { color: #0F9FB4 !important; }
.night .v[data-class=v] a:hover { color: #216C73 !important; }
.night .v[data-class=v] li { list-style: inherit; }
.night .v[data-class=v] .vwrap { border: 1px solid #223441; border-radius: 0; }
.night .v[data-class=v] .vwrap:hover { box-shadow: 0 0 6px 1px #223441; }
.night .v[data-class=v] .vbtn { border-radius: 0; background: none; }
.night .v[data-class=v] .vlist .vcard .vh { border-bottom-color: #293D4E; }
.night .v[data-class=v] .vwrap .vheader .vinput { border-bottom-color: #223441; }
.night .v[data-class=v] .vwrap .vheader .vinput:focus { border-bottom-color: #339EB4; }
.night .v[data-class=v] code, .night .v[data-class=v] pre,.night .v[data-class=v] .vlist .vcard .vhead .vsys { background: #203240 !important; }
.night .v[data-class=v] code, .night .v[data-class=v] pre { color: #F0F0F0; font-size: 95%; }
.v[data-class=v] .vcards .vcard .vh {border-bottom-color: #223441; }
.night .v[data-class=v] .vcards .vcard .vcontent.expand:before {background: linear-gradient(180deg,rgba(38,57,73,.4),rgba(38,57,73,.9));}
.night .v[data-class=v] .vcards .vcard .vcontent.expand:after {background: rgba(38,57,73,.9)}
</style><div id="vcomment"></div><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'',
  appKey:'',
  lang: 'zh-cn',
  placeholder:'ヾﾉ≧∀≦)o Come on, say something...',
  avatar:'identicon',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></section><footer><p>Copyright © 2016 - 2020 <a href="/." rel="nofollow">我是良民</a> | <strong><a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong><br><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span></span> <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span></span> | Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a>Theme with<a rel="nofollow" target="_blank" href="https://github.com/litreily/snark-hexo"> snark.</a></p></footer></div></div></div><script type="text/javascript" src="/plugins/prettify/prettify.js"></script><script type="text/javascript" src="/js/search.js"></script><script type="text/javascript" src="/js/top.js"></script><script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
    search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"></body></html>